(function(t){function e(e){for(var o,a,i=e[0],c=e[1],u=e[2],p=0,f=[];p<i.length;p++)a=i[p],s[a]&&f.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"022b":function(t,e,n){},"034f":function(t,e,n){"use strict";var o=n("1356"),s=n.n(o);s.a},"0418":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"applist-header"},[n("div",{staticClass:"title"},[t._v(t._s(t.title))])])},s=[],r={data:function(){return{title:"Home"}},methods:{}},a=r,i=(n("7565"),n("2877")),c=Object(i["a"])(a,o,s,!1,null,"17688e66",null);e["a"]=c.exports},1356:function(t,e,n){},"1d8b":function(t,e,n){},"4acf":function(t,e,n){"use strict";var o=n("de26"),s=n.n(o);s.a},"4efb":function(t,e,n){"use strict";var o=n("1d8b"),s=n.n(o);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),s=n("bb71");n("da64");o["a"].use(s["a"],{iconfont:"md"});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/ws"}},[t._v("WS")]),t._v(" |\n      "),n("router-link",{attrs:{to:"/sse1"}},[t._v("HTTP/1.1")]),t._v(" |\n\t  "),n("router-link",{attrs:{to:"/sses"}},[t._v("HTTPS/1.1")]),t._v(" |\n\t  "),n("router-link",{attrs:{to:"/sse2"}},[t._v("HTTP/2")])],1),n("router-view")],1)])},a=[],i=(n("034f"),n("2877")),c=n("6544"),u=n.n(c),l=n("7496"),p={},f=Object(i["a"])(p,r,a,!1,null,null,null),d=f.exports;u()(f,{VApp:l["a"]});var v,m,h=n("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("button",{on:{click:t.setupStream}},[t._v("run")]),n("button",{staticStyle:{"margin-left":"20px"},on:{click:t.stopStream}},[t._v("stop")]),n("button",{staticStyle:{"margin-left":"20px"},on:{click:t.postTest}},[t._v("send")]),n("p",[t._v(t._s(t.state?t.state:"null"))]),n("p",[t._v(t._s(t.sse?t.sse:"null"))])])},b=[],y={data:function(){return{sse:null,state:null,tes:null,count:0,api1:"http://localhost:3000",api2:"https://localhost:3001"}},computed:{api:function(){return 2==this.$route.params.type?this.api2:this.api1}},watch:{api:function(t){v.close(),this.state="Disconnected"}},methods:{setupStream:function(){var t=this;window.EventSource?(v=new EventSource(this.api),v.addEventListener("message",function(e){t.sse=e.data},!1),v.addEventListener("open",function(e){t.state="connected"},!1),v.addEventListener("error",function(e){e.eventPhase==EventSource.CLOSED&&v.close(),e.target.readyState==EventSource.CLOSED?t.state="Disconnected":t.state==EventSource.CONNECTING&&(t.state="Connecting...")},!1)):console.log("Your browser doesn't support SSE")},stopStream:function(){v.close(),this.state="Disconnected"},postTest:function(){console.log(this.api==this.api1?"sse_http1":"sse_http2"),fetch("".concat(this.api,"/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:this.api==this.api1?"sse_http1":"sse_http2"})}).then(function(t){console.log(t.statusText)})}}},_=y,w=Object(i["a"])(_,g,b,!1,null,null,null),S=(w.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("input",{attrs:{type:"button",value:"start"},on:{click:t.subscribe}}),n("input",{staticStyle:{"margin-left":"20px"},attrs:{type:"button",value:"clear"},on:{click:t.clear}}),n("input",{staticStyle:{"margin-left":"20px"},attrs:{type:"button",value:"send"},on:{click:t.send}}),n("br"),t._v("\n    "+t._s(t.msg?t.msg:"null")+"\n")])}),k=[],C={data:function(){return{msg:null}},methods:{subscribe:function(){var t=this;"WebSocket"in window?(m=new WebSocket("ws://localhost:1337"),m.addEventListener("message",function(e){t.msg=e.data})):alert("WebSocket NOT supported by your Brosocketer!")},send:function(){m.send("websocket")},clear:function(){m.close()}},watch:{}},E=C,O=Object(i["a"])(E,S,k,!1,null,null,null),T=(O.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("html",[n("div",{staticClass:"applist-container"},[n("the-header"),n("v-dialog",{attrs:{width:"330px"},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[n("v-card",[n("div",{staticClass:"popup-box",on:{click:function(t){t.stopPropagation()}}},[n("h1",[t._v("Testing")]),n("hr"),n("div",{staticClass:"narrow"},[n("p",{staticClass:"subheading"},[t._v("Jeda antar pengiriman (ms) :")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.timerValue,expression:"timerValue"}],attrs:{type:"text",name:""},domProps:{value:t.timerValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.startTimer(t.timerValue)},input:function(e){e.target.composing||(t.timerValue=e.target.value)}}})]),n("div",{staticClass:"narrow"},[n("p",{staticClass:"subheading"},[t._v("Jumlah pengiriman :")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.totalValue,expression:"totalValue"}],attrs:{type:"text",name:""},domProps:{value:t.totalValue},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.startTimer(t.timerValue)},input:function(e){e.target.composing||(t.totalValue=e.target.value)}}})]),n("div",{staticClass:"popup-button"},[n("div",{staticClass:"popup-buton-cancel",on:{click:function(e){return t.stopTimer()}}},[t._v("Stop")]),n("div",{staticClass:"popup-buton-save",on:{click:function(e){return t.startTimer(t.timerValue)}}},[t._v("Run")])])])])],1),n("div",{staticClass:"applist-wrapper-body"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title",on:{click:function(e){t.showPopup=!t.showPopup}}},[n("p",[t._v("Sensor")])])]),n("div",{staticClass:"white-warp"},t._l(t.sensors,function(t,e){return n("div",{key:e},[n("the-sensor",{attrs:{sensor:t}})],1)}),0),t._m(0),n("div",{staticClass:"white-warp"},t._l(t.roomsArduinoA,function(e,o){return n("div",{key:o},[n("the-room",{attrs:{room:e},on:{"change-option":function(e){return t.send(e)}}})],1)}),0),t._m(1),n("div",{staticClass:"white-warp"},t._l(t.roomsArduinoB,function(e,o){return n("div",{key:o},[n("the-room",{attrs:{room:e},on:{"change-option":function(e){return t.send(e)}}})],1)}),0)])])],1)])}),P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title"},[n("p",[t._v("Arduino 1")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title"},[n("p",[t._v("Arduino 2")])])])}],x=n("fa15"),N=x["a"],A=(n("aff3"),n("b0af")),D=n("169a"),j=Object(i["a"])(N,T,P,!1,null,"41bdd235",null),V=j.exports;u()(j,{VCard:A["a"],VDialog:D["a"]}),o["a"].use(h["a"]);var $=new h["a"]({mode:"history",base:"/",routes:[{path:"/:type",name:"dashboard",component:V}]}),I=n("2f62");o["a"].use(I["a"]);var L=new I["a"].Store({state:{socket:{isConnected:!1,message:"",reconnectError:!1}},mutations:{SOCKET_ONOPEN:function(t,e){o["a"].prototype.$socket=e.currentTarget,t.socket.isConnected=!0},SOCKET_ONCLOSE:function(t,e){t.socket.isConnected=!1},SOCKET_ONERROR:function(t,e){console.error(t,e)},SOCKET_ONMESSAGE:function(t,e){t.socket.message=e},SOCKET_RECONNECT:function(t,e){console.info(t,e)},SOCKET_RECONNECT_ERROR:function(t){t.socket.reconnectError=!0}},actions:{sendMessage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1?arguments[1]:void 0;console.log(t),o["a"].prototype.$socket.send(t)},close:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];o["a"].prototype.$socket.disconnect()}}}),H=n("9483");Object(H["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["a"].config.productionTip=!1,new o["a"]({router:$,store:L,render:function(t){return t(d)}}).$mount("#app")},"593f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sensor"},[n("div",{staticClass:"sensor-name black--text"},[t._v(t._s(t.sensor.name))]),n("v-layout",{staticClass:"full-height",attrs:{"align-center":"","justify-center":"",column:""}},t._l(t.sensor.property,function(e,o){return n("div",{key:o},[n("p",[t._v(t._s(e.value)+"℃")])])}),0)],1)},s=[],r={data:function(){return{}},props:["sensor"],methods:{},watch:{}},a=r,i=(n("4acf"),n("2877")),c=n("6544"),u=n.n(c),l=n("a722"),p=Object(i["a"])(a,o,s,!1,null,"64a5d3ce",null);e["a"]=p.exports;u()(p,{VLayout:l["a"]})},"65a7":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[{name:"Dapur",property:[{value:0}]},{name:"Teras",property:[{value:0}]}]},7565:function(t,e,n){"use strict";var o=n("022b"),s=n.n(o);s.a},aff3:function(t,e,n){"use strict";var o=n("bc84"),s=n.n(o);s.a},bc84:function(t,e,n){},d403:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room"},[n("div",{staticClass:"room-name black--text"},[t._v(t._s(t.room.name))]),n("v-layout",{attrs:{"align-start":"","justify-start":"",column:""}},t._l(t.room.property,function(e,o){return n("div",{key:o},[n("p",{staticClass:"room-property grey--text text--darken-1"},[t._v(t._s(e.name))]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"property.status"}],on:{change:[function(n){var o=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"status",n.target.multiple?o:o[0])},function(n){return t.select(e)}]}},t._l("Lampu"==e.name?t.optionLamp:"Kipas Angin"==e.name?t.optionFan:t.optionDoor,function(e){return n("option",{key:e},[t._v(t._s(e)+"\n\t\t\t\t\t")])}),0)])}),0)],1)},s=[],r=(n("7f7f"),{data:function(){return{optionLamp:["MATI","HIDUP - REDUP","HIDUP - SEDANG","HIDUP - TERANG","HIDUP"],optionFan:["MATI","HIDUP - PELAN","HIDUP - SEDANG","HIDUP - CEPAT","HIDUP"],optionDoor:["TUTUP","BUKA"]}},props:["room"],methods:{select:function(t){this.$emit("change-option",JSON.stringify({room:this.room.name,property:t.name,status:t.status,currentTime:new Date}))}},watch:{room:{handler:function(t){},deep:!0}}}),a=r,i=(n("4efb"),n("2877")),c=n("6544"),u=n.n(c),l=n("a722"),p=Object(i["a"])(a,o,s,!1,null,"5f167e16",null);e["a"]=p.exports;u()(p,{VLayout:l["a"]})},de26:function(t,e,n){},fa15:function(t,e,n){"use strict";(function(t){n("ac6a"),n("456d");var o,s=n("0418"),r=n("d403"),a=n("593f"),i=n("65a7"),c=[];e["a"]={components:{TheHeader:s["a"],TheRoom:r["a"],TheSensor:a["a"]},data:function(){return{rooms:[],roomsArduinoA:[],roomsArduinoB:[],sensors:[],apiWs:"ws://serveo.net:6884",apiSse1:"http://serveo.net:6881",apiSses:"https://serveo.net:6882",apiSse2:"https://serveo.net:6883",totalArduino:2,listRooms:[],showPopup:!1,timerQueue:[],timerValue:1e3,totalValue:1,totalQueue:0}},methods:{startTimer:function(t){var e=this;this.timerQueue=[],o=setInterval(function(){var t=new Date;e.send(JSON.stringify({currentTime:t})),e.timerQueue.push(t),e.totalQueue++,e.totalQueue==e.totalValue&&(clearInterval(o),e.totalQueue=0)},t)},stopTimer:function(){clearInterval(o)},send:function(e){switch(this.$route.params.type){case"ws":c[0].send(e);break;case"sse1":fetch("".concat(this.apiSse1,"/"),{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then(function(t){});break;case"sses":fetch("".concat(this.apiSses,"/"),{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then(function(t){});break;case"sse2":new t(e);fetch("".concat(this.apiSse2,"/"),{method:"POST",body:e}).then(function(t){});break}},listen:function(){for(var t=this,e=function(e){c[e].addEventListener("message",function(n){if(""!==n.data)if(0===e){var o=JSON.parse(n.data),s=Object.keys(o)[0];if(1==s){t.roomsArduinoA=o[1];var r=new Date(o.currentTime),a=new Date-r,i=t.timerQueue.filter(function(t){if(new Date(t)-r!=0)return t;console.log(a),console.log(r.toISOString())});t.timerQueue=i,0==t.totalQueue&&(console.log("tumpukan yang belum diterima : "+t.timerQueue.length),console.log(t.timerQueue.map(function(t){return t.toISOString()})))}0==s&&(t.roomsArduinoB=o[0])}else t.sensors[e-1].property[0].value=n.data},!1)},n=0;n<=this.sensors.length;n++)e(n);c[0].onopen=function(){var e=new Date;t.send(JSON.stringify({currentTime:e})),t.timerQueue.push(e)}}},mounted:function(){switch(this.sensors=i["a"],this.$route.params.type){case"ws":for(var t=0;t<=this.sensors.length;t++)c[t]=new WebSocket(this.apiWs+"/"+t);break;case"sse1":for(var e=0;e<=this.sensors.length;e++)c[e]=new EventSource(this.apiSse1+"/"+e);break;case"sses":for(var n=0;n<=this.sensors.length;n++)c[n]=new EventSource(this.apiSses+"/"+n);break;case"sse2":for(var o=0;o<=this.sensors.length;o++)c[o]=new EventSource(this.apiSse2+"/"+o);break}this.listen()},watch:{rooms:function(t){}}}}).call(this,n("b639").Buffer)}});
//# sourceMappingURL=app.400e470e.js.map
